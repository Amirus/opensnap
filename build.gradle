defaultTasks 'clean', 'build'

task clean(dependsOn: [':opensnap-client:clean', ':opensnap-server:clean', 'cleanBuildDir']) << {

}

task build(dependsOn: [':opensnap-client:build', ':opensnap-server:build', 'copyWarTask']) << {
	
}


task run() << {
	javaexec {
		main = '-jar'
		args '-Dspring.profiles.active=local'
		args 'build/opensnap.jar'
	}
} 

task copyWarTask(type: Copy, dependsOn: ':opensnap-server:build') {
    from('opensnap-server/build/libs') {
    	include '**/*.war'
    	rename 'opensnap-(.*).war', 'opensnap.jar'
    }
    into 'build'
}

task cleanBuildDir(type: Delete) {
    delete 'build'
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.11'
}
